# ============================================
# Farm Vaidya Environment Configuration
# ============================================
# This is a SHARED .env file for both Backend and LightRAG services
# Copy this file to .env and fill in your values

# ============================================
# Backend API Configuration (Port 8000)
# ============================================

# MongoDB Connection
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/farmvaidya?retryWrites=true&w=majority

# JWT Authentication
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Google OAuth (if used)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# CORS Settings (optional)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# LightRAG API URL (Backend will communicate with LightRAG)
LIGHTRAG_API_URL=http://localhost:9621

# ============================================
# LightRAG Server Configuration (Port 9621)
# ============================================

# Server Settings
HOST=0.0.0.0
PORT=9621
WORKERS=1
TIMEOUT=300
CORS_ORIGINS=*

# WebUI Settings
WEBUI_TITLE=Farm Vaidya Knowledge Base
WEBUI_DESCRIPTION=Agricultural Knowledge Graph RAG System

# Directory Configuration
# INPUT_DIR=./inputs
# WORKING_DIR=./rag_storage

# Logging
LOG_LEVEL=INFO
# VERBOSE=False

# ============================================
# LLM Configuration (Google Gemini)
# ============================================

# IMPORTANT: LightRAG uses Gemini for both LLM and Embeddings
LLM_BINDING=gemini
LLM_MODEL=gemini-2.0-flash-lite
LLM_BINDING_HOST=https://generativelanguage.googleapis.com
LLM_BINDING_API_KEY=your_gemini_api_key_here

# Gemini API Key (used by both LLM and Embeddings)
GEMINI_API_KEY=your_gemini_api_key_here

# LLM Options
LLM_MAX_ASYNC=4
LLM_MAX_TOKENS=32768
LLM_MAX_EMBEDDING_TOKENS=2048
ENABLE_LLM_CACHE=true
ENABLE_LLM_CACHE_FOR_EXTRACTION=true

# ============================================
# Embedding Configuration (Google Gemini)
# ============================================

EMBEDDING_BINDING=gemini
EMBEDDING_MODEL=gemini-embedding-001
EMBEDDING_BINDING_HOST=https://generativelanguage.googleapis.com
EMBEDDING_BINDING_API_KEY=your_gemini_api_key_here
EMBEDDING_DIM=768
EMBEDDING_MAX_TOKEN_SIZE=2048

# ============================================
# RAG Configuration
# ============================================

# Knowledge Graph Settings
SUMMARY_LANGUAGE=English
ENTITY_TYPES=["Person","Creature","Organization","Location","Event","Concept","Method","Content","Data","Artifact","NaturalObject"]

# Chunking Settings
CHUNK_SIZE=1200
CHUNK_OVERLAP_SIZE=100

# Query Settings
COSINE_THRESHOLD=0.2
TOP_K=40
CHUNK_TOP_K=20
MAX_ENTITY_TOKENS=6000
MAX_RELATION_TOKENS=8000
MAX_TOTAL_TOKENS=30000

# KG Chunk Selection Strategy (VECTOR or WEIGHT)
KG_CHUNK_PICK_METHOD=VECTOR

# ============================================
# Storage Configuration
# ============================================

# Default: JsonKVStorage + NanoVectorDB + NetworkX
# For production, you can configure external storage:

# Neo4j (Graph Storage)
# NEO4J_URI=neo4j+s://xxxxx.databases.neo4j.io
# NEO4J_USERNAME=neo4j
# NEO4J_PASSWORD=your-password

# MongoDB (Document Storage)
# MONGODB_STORAGE_URI=mongodb+srv://user:pass@cluster.mongodb.net/lightrag
# MONGODB_DATABASE=lightrag

# PostgreSQL (Vector Storage with pgvector)
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_USER=your_username
# POSTGRES_PASSWORD=your_password
# POSTGRES_DATABASE=lightrag

# ============================================
# Reranking (Optional)
# ============================================

# RERANK_BINDING=null
# RERANK_BY_DEFAULT=False
# MIN_RERANK_SCORE=0.0

# For Cohere Reranking:
# RERANK_BINDING=cohere
# RERANK_MODEL=rerank-multilingual-v3.0
# RERANK_BINDING_API_KEY=your_cohere_api_key

# For Jina Reranking:
# RERANK_BINDING=jina
# RERANK_MODEL=jina-reranker-v2-base-multilingual
# RERANK_BINDING_API_KEY=your_jina_api_key

# ============================================
# Security & Authentication (Optional)
# ============================================

# API Key Protection
# LIGHTRAG_API_KEY=your-secure-api-key-here
# WHITELIST_PATHS=/health,/api/*

# JWT Authentication for LightRAG
# AUTH_ACCOUNTS=admin:admin123,user1:pass456
# TOKEN_SECRET=Your-Key-For-LightRAG-API-Server
# TOKEN_EXPIRE_HOURS=48
# GUEST_TOKEN_EXPIRE_HOURS=24

# ============================================
# Advanced Settings (Optional)
# ============================================

# Ollama Emulation
OLLAMA_EMULATING_MODEL_TAG=latest

# Max Graph Nodes
# MAX_GRAPH_NODES=1000

# SSL Configuration
# SSL=false
# SSL_CERTFILE=/path/to/cert.pem
# SSL_KEYFILE=/path/to/key.pem

# Tiktoken Cache (for offline deployment)
# TIKTOKEN_CACHE_DIR=/app/data/tiktoken

# ============================================
# Notes for Render Deployment
# ============================================
# 1. Set all these environment variables in Render Dashboard
# 2. Use the same GEMINI_API_KEY for both services
# 3. Update LIGHTRAG_API_URL to your Render service URL
# 4. Set MONGODB_URI to your production MongoDB Atlas cluster
# 5. Generate secure JWT_SECRET: openssl rand -hex 32
# 6. Set appropriate CORS_ORIGINS for your frontend domain
